{% extends is_preview|default:False|yesno:'base.html,base_minimal.html' %}
{% load i18n %}
{% load static %}
{% block title %}{% trans "Thank you" %} - CheckTick{% endblock %}
{% block content %}
<div class="hero min-h-[40vh] bg-base-100 rounded-box">
  <div class="hero-content text-center">
    <div class="max-w-xl">
      {% if not is_preview %}
        {# Show brand icon/logo for public submissions #}
        <div class="mb-6 flex justify-center">
          {% if brand.icon_url %}
            <a href="{% url 'core:home' %}">
              <img src="{{ brand.icon_url }}" alt="{{ brand.icon_alt|default:brand.title }}" class="{{ brand.icon_size_class|default:'w-16 h-16' }}" />
            </a>
          {% else %}
            <a href="{% url 'core:home' %}">
              {% include "components/icons/checktick.html" with classes=brand.icon_size_class|default:'w-16 h-16' aria_label=brand.icon_alt|default:brand.title title=brand.icon_title|default:brand.title %}
            </a>
          {% endif %}
        </div>
      {% endif %}
      <h1 class="text-3xl font-bold">{% trans "Thank you" %}</h1>
      <p class="py-4 opacity-80">{% trans "Your response has been recorded." %}</p>

      {% if receipt_token %}
      {# Receipt token for pseudonymous responses - enables data subject rights #}
      <div class="alert alert-info mt-6 text-left">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="h-6 w-6 shrink-0 stroke-current" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <div>
          <h3 class="font-bold">{% trans "Your Receipt Token" %}</h3>
          <p class="text-sm mb-2">{% blocktrans %}This is your unique receipt token. Save it securely â€” you can use it to request access to, correction of, or deletion of your response.{% endblocktrans %}</p>
          <div class="flex items-center gap-2 mt-2">
            <code class="bg-base-200 px-3 py-2 rounded font-mono text-sm select-all" id="receipt-token">{{ receipt_token }}</code>
            <button type="button" class="btn btn-sm btn-ghost" onclick="navigator.clipboard.writeText('{{ receipt_token }}'); this.textContent='{% trans "Copied!" %}'; setTimeout(() => this.innerHTML='<svg xmlns=\'http://www.w3.org/2000/svg\' class=\'h-4 w-4\' fill=\'none\' viewBox=\'0 0 24 24\' stroke=\'currentColor\'><path stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'2\' d=\'M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\' /></svg>', 2000)" title="{% trans 'Copy to clipboard' %}">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
              </svg>
            </button>
          </div>
          <p class="text-xs opacity-70 mt-2">{% blocktrans %}This token will not be shown again. Please store it in a safe place.{% endblocktrans %}</p>
        </div>
      </div>
      {% endif %}

      {% if is_preview and survey %}
        <a href="/surveys/{{ survey.slug }}/take/" class="btn btn-primary">{% trans "Back to survey" %}</a>
      {% elif not is_preview %}
        <p class="text-sm opacity-60 mt-4">{% trans "You may now close this page" %}</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
